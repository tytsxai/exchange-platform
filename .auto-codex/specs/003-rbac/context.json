{
  "task_description": "\n\u8fd0\u8425\u540e\u53f0 RBAC \u4e0e\u914d\u7f6e\u7ba1\u7406\n\n\u6784\u5efa\u8fd0\u8425\u540e\u53f0\u57fa\u7840\u80fd\u529b\uff0c\u5305\u542b RBAC \u89d2\u8272\u6743\u9650\u3001\u4ea4\u6613\u5bf9/\u8d39\u7387/\u98ce\u63a7\u89c4\u5219\u914d\u7f6e\u3001Kill Switch \u4e0e\u5ba1\u8ba1\u65e5\u5fd7\u3002\n\n## Rationale\n\u8fd0\u8425\u4e0e\u98ce\u63a7\u9700\u8981\u53ef\u63a7\u7684\u914d\u7f6e\u4e0e\u7d27\u6025\u5904\u7f6e\u80fd\u529b\uff0c\u4fdd\u969c\u7cfb\u7edf\u7a33\u5b9a\u4e0e\u5408\u89c4\u3002\n\n## Acceptance Criteria\n- [ ] \u7ed9\u5b9a\u4e0d\u540c\u89d2\u8272\u8d26\u6237\uff0c\u8bbf\u95ee\u53d7\u9650\u529f\u80fd\u65f6\u6743\u9650\u6821\u9a8c\u6b63\u786e\u5e76\u8bb0\u5f55\u5ba1\u8ba1\u65e5\u5fd7\u3002\n- [ ] \u8fd0\u8425\u53ef\u5728\u7ebf\u914d\u7f6e\u4ea4\u6613\u5bf9\u4e0e\u8d39\u7387\uff0c\u5e76\u5728\u9650\u5b9a\u65f6\u95f4\u5185\u751f\u6548\u4e14\u53ef\u56de\u6eda\u3002\n- [ ] \u89e6\u53d1 Kill Switch \u540e\uff0c\u6307\u5b9a\u4ea4\u6613\u5bf9\u65b0\u8ba2\u5355\u88ab\u62d2\u7edd\u5e76\u8fd4\u56de\u660e\u786e\u9519\u8bef\u7801\u3002\n",
  "scoped_services": [
    "exchange-admin",
    "exchange-order",
    "exchange-common"
  ],
  "files_to_modify": {
    "exchange-admin": [
      "exchange-admin/cmd/admin/main.go",
      "exchange-admin/internal/service/admin.go",
      "exchange-admin/internal/service/repository.go",
      "exchange-admin/internal/repository/admin.go",
      "exchange-admin/api/openapi.yaml"
    ],
    "exchange-order": [
      "exchange-order/internal/service/order.go",
      "exchange-order/internal/repository/order.go"
    ],
    "exchange-common": [
      "exchange-common/scripts/init-db.sql",
      "exchange-common/migrations/"
    ]
  },
  "files_to_reference": [
    "exchange-admin/internal/service/admin.go",
    "exchange-admin/internal/repository/admin.go",
    "exchange-admin/cmd/admin/main.go",
    "exchange-order/internal/service/order.go",
    "exchange-order/internal/repository/order.go",
    "exchange-common/scripts/init-db.sql"
  ],
  "patterns": {
    "service_pattern": "Services use explicit repository interfaces (service/AdminRepository) and create audit log entries via repository.CreateAuditLog after mutations.",
    "route_pattern": "HTTP handlers in cmd/admin/main.go use net/http ServeMux with per-path switch blocks and JSON encoding.",
    "repository_pattern": "Repository methods wrap SQL with context, return typed structs, and store timestamps in Unix ms."
  },
  "existing_implementations": {
    "description": "RBAC tables and audit logging already exist in exchange_admin schema; symbol config status is used by exchange-order to gate order entry.",
    "relevant_files": [
      "exchange-common/scripts/init-db.sql",
      "exchange-admin/internal/repository/admin.go",
      "exchange-admin/internal/service/admin.go",
      "exchange-order/internal/service/order.go"
    ]
  },
  "created_at": "2025-12-24T05:05:42+07:00"
}
