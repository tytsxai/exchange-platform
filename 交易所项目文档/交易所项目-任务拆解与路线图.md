---
title: 交易所项目-任务拆解与路线图
topic: 项目文档/交易所
tags:
  - 交易所
  - 路线图
  - 任务拆解
  - 交付
summary: >
  将核心功能矩阵落到可执行的开发任务与里程碑：按交易内核->行情->钱包->后台->合规->衍生品逐步推进，保证“先实现、可开关、可验收”。
created: 2025-12-21
updated: 2025-12-21
stage: draft
visibility: internal
owner: me
ai_include: true
source: ""
---

# 交易所项目-任务拆解与路线图

> 使用方式：按里程碑推进，每个里程碑都要“能验收”。功能可以默认不开放，但必须做到“实现可用 + 可测试 + 可开关 + 可审计”。

## 0 目录
- [[#1 全局里程碑（推荐顺序）]]
- [[#2 Epic 清单（按模块）]]
- [[#3 Definition of Done（DoD）]]

---

## 1 全局里程碑（推荐顺序）
### M0：文档冻结与决策到位
- [ ] [交易所项目-核心功能矩阵.md](交易所项目-核心功能矩阵.md) 过一遍（确认都列全）
- [ ] ADR 最小集拍板：`ADR-001/002/003/007`（撮合/资金/行情/Outbox）
- [ ] [交易所项目-接口契约.md](交易所项目-接口契约.md) 最小集可联调（下单/撤单/查询/WS 回报/行情）
- [ ] [交易所项目-数据模型.md](交易所项目-数据模型.md) 最小集可落库（Order/Trade/Ledger/Balance/SymbolConfig）

### M1：现货交易闭环（核心内核）
- [ ] 下单/撤单幂等与风控前置（精度/最小下单/价格保护/限流）
- [ ] 撮合（按 `symbol` 分片保序）
- [ ] 清算：冻结/解冻/成交记账（账本为 truth）
- [ ] 私有回报：订单状态与余额变更（WS）
- [ ] 验收：资金不丢、不重记（见 [交易所项目-测试与验收.md](交易所项目-测试与验收.md)）

### M2：行情闭环（对外可用）
- [ ] `market.{symbol}.book/trades/kline`（WS）
- [ ] `GET /v1/depth/trades/ticker/exchangeInfo`（REST）
- [ ] seq + 断线重拉快照（MVP）
- [ ] K 线聚合与回补策略（V1）

### M3：后台与止血能力（可运营）
- [ ] 交易对/精度/状态配置（含审计）
- [ ] 费率配置（含审计）
- [ ] 风控规则配置（限流/价格保护/黑白名单）
- [ ] Kill switch：全局暂停下单/只撤单/按 `symbol` 暂停
- [ ] Admin RBAC + 审计 + 高风险双人复核（见 [ADR/ADR-006-后台权限与审计模型.md](ADR/ADR-006-后台权限与审计模型.md)）

### M4：钱包出入金能力（先实现、后开关）
- [ ] 资产/网络配置（deposit/withdraw 开关、确认数、手续费）
- [ ] 充值地址与充值入账（去重 + 入账走账本）
- [ ] 提现申请（幂等）+ 风控（2FA/白名单/限额）+ 审批 + 出款
- [ ] 链上对账作业 + 异常处理
- [ ] 默认策略：先实现但关闭；合规与资源到位后灰度开启

### M5：合规与安全加强（按地区启用）
- [ ] KYC 状态机与资料提交流程（能力预留）
- [ ] AML/制裁名单接口位与审计（能力预留）
- [ ] 数据留存/导出策略（按法规）

### M6：合约/杠杆（核心能力预留，后续阶段）
- [ ] 指数/标记价体系（见 [ADR/ADR-004-合约价格体系（指数-标记价）.md](ADR/ADR-004-合约价格体系（指数-标记价）.md)）
- [ ] 仓位/保证金/风险率口径
- [ ] 强平引擎、保险基金、穿仓处理
- [ ] 资金费率结算入账（走账本）

---

## 2 Epic 清单（按模块）
### 2.1 交易（现货）
- [ ] Order Service：幂等、状态机、查询
- [ ] Matching Engine：OrderBook、撮合规则、事件输出
- [ ] Clearing/Settlement：冻结/解冻/成交清算、手续费
- [ ] 风控：价格保护/限流/STP/熔断

### 2.2 资金
- [ ] Ledger：账本写入（唯一幂等键）、余额快照更新、对账作业
- [ ] 资金审计：按订单/成交追溯资金变动

### 2.3 行情与数据
- [ ] MarketData：BookSnapshot/BookDelta/TradeCreated 推送与回补
- [ ] Kline：聚合、存储、回补
- [ ] 报表：手续费/成交/资金（后续）

### 2.4 用户与安全
- [ ] 登录/会话/2FA
- [ ] API Key：权限、IP 白名单、审计
- [ ] 安全通知（登录/提币等）

### 2.5 钱包（如启用）
- [ ] 充值监听、确认数、去重、入账
- [ ] 提现审批与出款、风控、对账

### 2.6 后台与审计
- [ ] RBAC、审计日志、双人复核
- [ ] 配置中心（交易对/费率/风控/开关）

### 2.7 事件总线
- [ ] Outbox + Relay
- [ ] 消费幂等与回放工具（行情/报表）

---

## 3 Definition of Done（DoD）
> 每个 Epic/功能点要满足这些才算“做出来了”。

- 文档：接口/数据模型/事件字段写清（能联调）
- 功能：核心路径跑通（含异常分支）
- 幂等：重复请求/重复事件不会导致资金或状态错误
- 审计：关键行为有日志与审计记录
- 可观测：关键指标可见（延迟、队列、拒单、对账异常）
- 开关：可随时关闭高风险功能（至少支持“只撤单/暂停下单”）
